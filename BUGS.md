Ниже перечислены баги, выявленные во время автоматизированного тестирования микросервиса объявлений. Для каждого бага указаны шаги воспроизведения, ожидаемое и фактическое поведение, а также отсылка к соответствующему тест-кейсу.

---

## BUG-1. POST `/api/1/item` возвращает 200 и укороченный JSON
- **Относится к тестам:** TestCase 1, 2, 3  
- **Шаги воспроизведения:**
  1. Выполнить `POST https://qa-internship.avito.com/api/1/item` с валидным телом (пример в `TESTCASES.md`).
  2. Проверить статус и содержимое ответа.
- **Ожидание:** согласно тест-кейсам и swagger — статус `201` (или минимум наличие созданного объекта) и JSON с полями `id`, `sellerId`, `name`, `price`, `statistics`, `createdAt`.
- **Фактически:** статус `200`, а тело ответа имеет вид `{"status": "Сохранили объявление - uuid"}` без полей объявления.
- **Комментарий:** из-за этого приходится выполнять дополнительный `GET` по возвращённому UUID, чтобы получить объект.

---

## BUG-2. POST `/api/1/item` отвергает значения статистики, равные 0
- **Относится к тесту:** TestCase 2  
- **Шаги воспроизведения:**
  1. Отправить `POST /api/1/item` с валидными данными, но указать `statistics.likes/viewCount/contacts = 0`.
- **Ожидание:** объявление создаётся, потому что ограничения на минимальное значение не описаны.
- **Фактически:** API возвращает `400 Bad Request`.
- **Комментарий:** тест пришлось адаптировать и выставлять минимальные значения равные 1.

---

## BUG-3. GET `/api/1/item/{id}` для несуществующего UUID возвращает 400
- **Относится к тесту:** TestCase 9  
- **Шаги воспроизведения:**
  1. Выполнить `GET /api/1/item/00000000-0000-0000-0000-000000000000`.
- **Ожидание:** статус `404 Not Found`.
- **Фактически:** статус `400 Bad Request`.

---

## BUG-4. GET `/api/1/statistic/{id}` для несуществующего UUID возвращает 400
- **Относится к тесту:** TestCase 17  
- **Шаги воспроизведения:**
  1. Выполнить `GET /api/1/statistic/00000000-0000-0000-0000-000000000000`.
- **Ожидание:** статус `404 Not Found`.
- **Фактически:** статус `400 Bad Request`.

---

## BUG-5. GET `/api/1/{sellerID}/item` игнорирует параметры пагинации
- **Относится к тесту:** TestCase 12  
- **Шаги воспроизведения:**
  1. Создать >=3 объявления для одного `sellerID`.
  2. Выполнить `GET /api/1/{sellerID}/item?page=1&size=2`.
- **Ожидание:** ответ содержит не более `size` элементов.
- **Фактически:** возвращается полный список объявлений (игнорирование `page` и `size`).

---

## BUG-6. GET `/api/1/item/{id}` (и другие ручки) возвращает данные без учёта регистра полей
- **Относится к тестам:** общая совместимость  
- **Описание:** В ответах используется `sellerId` (camelCase), тогда как в запросе требуется `sellerID`. Это заставляет клиента преобразовывать регистр вручную.

---



В ходе автоматизированного тестирования микросервиса объявлений обнаружены следующие баги:

---

## Bug #1: Неверный HTTP статус код при создании объявления

**Приоритет:** Средний  

### Описание
При успешном создании объявления API возвращает HTTP статус код `200` вместо ожидаемого `201 Created`.

### Шаги воспроизведения
1. Отправить POST запрос на `/api/1/item` с валидными данными:
```json
{
  "sellerID": 123456,
  "name": "Test Item",
  "price": 9900,
  "statistics": {
    "likes": 21,
    "viewCount": 11,
    "contacts": 43
  }
}
```

### Ожидаемый результат
- HTTP Status Code: `201 Created`
- В ответе присутствует поле `id`
- Все переданные данные сохранены корректно

### Фактический результат
- HTTP Status Code: `200 OK`
- В ответе присутствует поле `id`
- Все переданные данные сохранены корректно

### Затронутые тест-кейсы
- TestCase 1: Успешное создание объявления с валидными данными
- TestCase 2: Создание объявления с минимальными данными
- TestCase 3: Создание нескольких объявлений с разными sellerID

### Дополнительная информация
При создании нового ресурса должен возвращаться статус код `201 Created`, а не `200 OK`. Это указывает на успешное создание нового ресурса.

### Окружение
- API Endpoint: `https://qa-internship.avito.com/api/1/item`
- Метод: POST

---

## Bug #2: Неверный HTTP статус код при запросе несуществующего объявления

**Приоритет:** Высокий  

### Описание
При запросе несуществующего объявления по ID API возвращает HTTP статус код `400 Bad Request` вместо ожидаемого `404 Not Found`.

### Шаги воспроизведения
1. Отправить GET запрос на `/api/1/item/00000000-0000-0000-0000-000000000000` (несуществующий UUID)

### Ожидаемый результат
- HTTP Status Code: `404 Not Found`
- Сообщение об ошибке

### Фактический результат
- HTTP Status Code: `400 Bad Request`
- Сообщение об ошибке

### Затронутые тест-кейсы
- TestCase 9: Получение несуществующего объявления

### Дополнительная информация
Когда ресурс не найден, должен возвращаться статус код `404 Not Found`, а не `400 Bad Request`. Статус `400` должен использоваться для невалидных запросов (например, неверный формат данных), а не для отсутствующих ресурсов.

### Окружение
- API Endpoint: `https://qa-internship.avito.com/api/1/item/{id}`
- Метод: GET

---

## Bug #3: Неверный HTTP статус код при запросе статистики несуществующего объявления

**Приоритет:** Высокий  

### Описание
При запросе статистики несуществующего объявления API возвращает HTTP статус код `400 Bad Request` вместо ожидаемого `404 Not Found`.

### Шаги воспроизведения
1. Отправить GET запрос на `/api/1/statistic/00000000-0000-0000-0000-000000000000` (несуществующий UUID)

### Ожидаемый результат
- HTTP Status Code: `404 Not Found`
- Сообщение об ошибке

### Фактический результат
- HTTP Status Code: `400 Bad Request`
- Сообщение об ошибке

### Затронутые тест-кейсы
- TestCase 17: Получение статистики несуществующего объявления

### Дополнительная информация
Когда ресурс не найден, должен возвращаться статус код `404 Not Found`, а не `400 Bad Request`.

### Окружение
- API Endpoint: `https://qa-internship.avito.com/api/1/statistic/{id}`
- Метод: GET

---

## Bug #4: Пагинация не работает при получении объявлений продавца

**Приоритет:** Высокий  

### Описание
Параметры пагинации `page` и `size` игнорируются при запросе объявлений продавца. API возвращает все объявления продавца независимо от указанных параметров пагинации.

### Шаги воспроизведения
1. Создать несколько объявлений для одного sellerID (например, 5 объявлений)
2. Отправить GET запрос на `/api/1/{sellerID}/item?page=1&size=2`

### Ожидаемый результат
- HTTP Status Code: `200 OK`
- Количество элементов в ответе соответствует запрошенному `size` (2 элемента)

### Фактический результат
- HTTP Status Code: `200 OK`
- Количество элементов в ответе равно общему количеству объявлений продавца (все 5 элементов), параметры `page` и `size` игнорируются

### Затронутые тест-кейсы
- TestCase 12: Получение объявлений продавца с пагинацией

### Дополнительная информация
Отсутствие поддержки пагинации может привести к проблемам с производительностью при большом количестве объявлений у продавца.

### Окружение
- API Endpoint: `https://qa-internship.avito.com/api/1/{sellerID}/item`
- Метод: GET
- Параметры запроса: `page`, `size`

### Пример запроса
```
GET /api/1/123456/item?page=1&size=2
```

### Пример фактического ответа
Возвращается массив со всеми объявлениями продавца (например, 5 элементов), а не 2 элемента как указано в параметре `size=2`.

---

## Bug #5: Нестандартный формат ответа при создании объявления

**Приоритет:** Низкий  

### Описание
При создании объявления API возвращает ответ в формате `{"status": "..."}` с ID в тексте статуса, вместо возврата полного объекта созданного объявления.

### Шаги воспроизведения
1. Отправить POST запрос на `/api/1/item` с валидными данными

### Ожидаемый результат
- HTTP Status Code: `201 Created` (или `200 OK`)
- В ответе возвращается полный объект созданного объявления:
```json
{
  "id": "uuid",
  "sellerId": 123456,
  "name": "Test Item",
  "price": 9900,
  "statistics": {
    "likes": 21,
    "viewCount": 11,
    "contacts": 43
  },
  "createdAt": "timestamp"
}
```

### Фактический результат
- HTTP Status Code: `200 OK`
- В ответе возвращается только статус с ID в тексте:
```json
{
  "status": "Объявление создано - 866d1112-eed9-4ed2-8088-4aa6891f23d4"
}
```

### Дополнительная информация
Хотя ID можно извлечь из текста статуса, это нестандартный подход. Ожидается, что API вернет полный объект созданного объявления. В текущей реализации автоматизированных тестов используется обходное решение: после получения ответа с ID выполняется дополнительный GET запрос для получения полного объекта.

### Окружение
- API Endpoint: `https://qa-internship.avito.com/api/1/item`
- Метод: POST
